<!DOCTYPE html>
<html lang="en,default">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="Today’s blogpost will be about how you can improve your web application’s performance by adding caching using HTTP headers.These headers allow us to l">
    

    <!--Author-->
    
        <meta name="author" content="Maarten De Raedemaeker">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="Improving your application&#39;s performance using HTTP caching response headers"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Maarten De Raedemaeker"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

        <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>Improving your application&#39;s performance using HTTP caching response headers - Maarten De Raedemaeker</title>

    <!-- Bootstrap Core CSS -->
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"/>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Google Analytics -->
    


    <!-- favicon -->
    
    <link rel="icon" href="/images/theming/favicon.png">
    
	
</head>


<body>

    <!-- Menu -->
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Maarten De Raedemaeker</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                
                    <li>
                        <a href="/">
                            
                                Home
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives">
                            
                                Archives
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/tags">
                            
                                Tags
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/categories">
                            
                                Categories
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="https://github.com/maartenderaedemaeker">
                            
                                <i class="fa fa-github fa-stack-2x"></i>
                            
                        </a>
                    </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

    <!-- Main Content -->
    <!-- Page Header -->
<!-- Set your background image for this header in your post front-matter: cover -->

<header class="intro-header" style="background-image: url('/images/theming/background.png')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Improving your application's performance using HTTP caching response headers</h1>
                    
                    <span class="meta">
                        <!-- Date and Author -->
                        
                        
                            2017-10-20
                        
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Tags and categories -->
           
                <div class="col-lg-4 col-lg-offset-2 col-md-5 col-md-offset-1 post-tags">
                    
                        


<a href="/tags/HTTP-Caching-Performance/">#
- HTTP
- Caching
- Performance</a>


                    
                </div>
                <div class="col-lg-4 col-md-5 post-categories">
                    
                </div>
            

            <!-- Gallery -->
            

            <!-- Post Main Content -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <p>Today’s blogpost will be about how you can improve your web application’s performance by adding caching using HTTP headers.<br>These headers allow us to limit the number of requests clients have to make, reducing load and improving client speed.</p>
<h1 id="Cache-control"><a href="#Cache-control" class="headerlink" title="Cache-control"></a>Cache-control</h1><p>The main header we’ll be discussing is the cache-control header. This header is <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control#Browser_compatibility" target="_blank" rel="noopener">well supported</a>. It allows us to instruct how proxies and the end user’s browser should handle a resource, cache-wise.<br>Since there are a few bugs around with “immutable”, “stale-while-revalidate” and “stale-if-error”, I’ll focus on the more basic options.</p>
<ul>
<li>The first thing to discuss is <strong>cacheability</strong><ul>
<li><em>Public</em>: response can be cached by any cache</li>
<li><em>Private</em>: response should not be cached by a shared cache, only by end user.</li>
<li><em>No-Cache</em>: can be cached, but each request has to be <a href="#revalidation">revalidated</a>. This means that a shared cache can still hold on to a resource, but checks with the server before returning the cached content.</li>
<li><em>No-Store</em>: disables caching.</li>
</ul>
</li>
<li>The second part is about <strong>expiration</strong>.<br>Important options here are:<ul>
<li><em>max-age=[numberofseconds]</em>: this option defines how long both local and shared cached can cache a response.</li>
<li><em>s-max-age=[numberofseconds]</em>: this option does the same as max-age, but excludes private (local) caches, so it only works for shared caches.</li>
</ul>
</li>
</ul>
<p>Combined these could form the following headers:</p>
<p><strong>Example 1</strong>: local / private caching for one hour, not on shared proxy.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cache-Control: max-age=3600 private</span><br></pre></td></tr></table></figure>
<p><strong>Example 2</strong>: can be cached both locally and on shared proxies for 24 hours.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cache-Control: max-age=86400 public</span><br></pre></td></tr></table></figure></p>
<h1 id="Vary"><a href="#Vary" class="headerlink" title="Vary"></a>Vary</h1><p>Allows deciding if a response needs to be cached based on if a set of request headers differ.<br>You could use it to make sure content-negotiated content is cached correctly. For example, an XML response is already cached, you want to make sure to get another response when you ask for JSON by letting the caching vary on the “Accept-Encoding” headers.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vary: Accept-Encoding</span><br></pre></td></tr></table></figure></p>
<h1 id="Validation"><a href="#Validation" class="headerlink" title="Validation"></a>Validation</h1><p>There are two main ways of validating if a resource has changed.</p>
<h2 id="Strong-validation-ETags"><a href="#Strong-validation-ETags" class="headerlink" title="Strong validation: ETags"></a>Strong validation: ETags</h2><p>If the browser sends back an ETag header with a specific value, the client can later pass on the ETag in a following request to check if the content has changed. </p>
<p>For example:</p>
<p><strong>Client</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /someResource</span><br></pre></td></tr></table></figure></p>
<p><strong>Server</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">200 OK</span><br><span class="line">ETag: &quot;abcdef&quot;</span><br><span class="line"></span><br><span class="line">// SOME CONTENT</span><br></pre></td></tr></table></figure></p>
<p><strong>Client</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET /someResource</span><br><span class="line">If-None-Match: &quot;abcdef&quot;</span><br></pre></td></tr></table></figure></p>
<p><strong>Server</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">304 Not Modified</span><br></pre></td></tr></table></figure></p>
<h2 id="Weak-validation-Last-Modified"><a href="#Weak-validation-Last-Modified" class="headerlink" title="Weak validation: Last-Modified"></a>Weak validation: Last-Modified</h2><p>This is a similar principle, though it depends on a date instead of a unique value.</p>
<p><strong>Server</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Last-Modified Sun, 05 Feb 2017 10:34:56 UTC</span><br></pre></td></tr></table></figure></p>
<p><strong>Client</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">If-Not-Modified-Since: Sun, 05 Feb 2017 10:34:56 UTC</span><br></pre></td></tr></table></figure></p>
<p><strong>Server</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">304 Not Modified</span><br></pre></td></tr></table></figure></p>
<h1 id="Revalidation"><a href="#Revalidation" class="headerlink" title="Revalidation "></a>Revalidation <a name="revalidation"></a></h1><ul>
<li><em>immutable</em>: this tells the agent requesting the content that this resource will never change. The browser would be allowed to keep the resource, even after a hard refresh.</li>
<li><em>must-revalidate</em>: this forces the client to check if the content has changed each time using the If-Modified-Since or If-None-Match mechanisms.</li>
<li><em>proxy-revalidate</em>: this forces the proxy to check if the content has changed each time using the If-Modified-Since or If-None-Match mechanisms.<h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1>These headers give you some tools to get some nice performance gains for your web application using HTTP caching. Combined with a reverse proxy service such as <a href="https://www.cloudflare.com/" target="_blank" rel="noopener">Cloudflare</a>, these can take a great load of your servers.</li>
</ul>
<h2 id="Sources-amp-further-reading"><a href="#Sources-amp-further-reading" class="headerlink" title="Sources &amp; further reading"></a>Sources &amp; further reading</h2><ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Caching" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/HTTP/Caching</a></li>
<li><a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching" target="_blank" rel="noopener">https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching</a></li>
<li><a href="https://blog.fortrabbit.com/mastering-http-caching" target="_blank" rel="noopener">https://blog.fortrabbit.com/mastering-http-caching</a></li>
<li><a href="https://devcenter.heroku.com/articles/increasing-application-performance-with-http-cache-headers" target="_blank" rel="noopener">https://devcenter.heroku.com/articles/increasing-application-performance-with-http-cache-headers</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control</a></li>
<li><a href="https://www.mnot.net/cache_docs/" target="_blank" rel="noopener">https://www.mnot.net/cache_docs/</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Vary" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Vary</a></li>
</ul>


                
            </div>

            <!-- Comments -->
            
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    


                </div>
            
        </div>
    </div>
</article>

    <!-- Footer -->
    <hr />

<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    

                    

                    
                        <li>
                            <a href="https://github.com/maartenderaedemaeker" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    

                    
                        <li>
                            <a href="https://www.linkedin.com/in/maartenderaedemaeker/" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    

                    

                    
                </ul>
                <p class="copyright text-muted">&copy; 2018 Maarten De Raedemaeker<br></p>
               </div>
        </div>
    </div>
</footer>


    <!-- After footer scripts -->
    
<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Bootstrap -->
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Disqus Comments -->



</body>

</html>